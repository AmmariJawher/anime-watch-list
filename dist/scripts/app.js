const date=document.querySelector(".date"),clear=document.querySelector(".clear"),list=document.querySelector(".list"),addItem=document.querySelector(".add-item"),input=document.querySelector("input"),addButton=document.querySelector(".add"),errorMessage=document.querySelector(".error");let id=0,itemsList=[];const UNCHECK="far",CHECK="fas",LINE_THROUGH="line-through";let data=localStorage.getItem("TODO");function loadList(e){e.forEach(e=>{addItemToList(e.text,e.id,e.done)})}function saveLocally(){localStorage.removeItem("TODO"),localStorage.setItem("TODO",JSON.stringify(itemsList))}"[]"!==data?(itemsList.splice(0,itemsList.length),itemsList=JSON.parse(data),id=itemsList.length,loadList(itemsList)):id=0;const options={weekday:"long",month:"short",day:"numeric"},dateNow=new Date;function addItemToList(e,t,i){itemsList.push({text:e,id:t,done:!1});const o=`<li class="item">\n  <i class="${i?CHECK:UNCHECK} fa-check-circle button" job="complete" id="${id}"></i>\n  <span class="text ${i?LINE_THROUGH:""}">${e}</span>\n  <i class="fas fa-minus-circle delete button" job="delete" id="${id}"></i>\n  </li>`;list.insertAdjacentHTML("beforeend",o)}function showMessage(e){e.style.opacity=1,setTimeout(function(){e.style.opacity=0},2e3)}function toDoComplete(e){e.classList.toggle(CHECK),e.classList.toggle(UNCHECK),e.parentNode.querySelector(".text").classList.toggle(LINE_THROUGH),itemsList[e.id].done=!itemsList[e.id].done,saveLocally()}function deleteItem(e){e.parentNode.remove(),itemsList.splice(e.id,1),saveLocally()}date.innerHTML=dateNow.toLocaleDateString("en-US",options),clear.addEventListener("click",function(){for(;list.firstChild;)list.firstChild.remove();itemsList.splice(0,itemsList.length),saveLocally(),location.reload()}),addItem.addEventListener("keyup",function(e){if(13==e.keyCode){const e=input.value;e?(addItemToList(e,id),saveLocally()):showMessage(errorMessage),input.value=""}}),addButton.addEventListener("click",function(){const e=input.value;e&&e.length<60?(console.log(e.length),addItemToList(e,id),saveLocally()):showMessage(errorMessage),input.value=""}),list.addEventListener("click",function(e){const t=e.target,i=t.attributes.job.value;"complete"===i?toDoComplete(t):"delete"===i&&deleteItem(t)});